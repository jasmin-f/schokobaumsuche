<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Auf der Suche nach den Schokobäumchen</title>
    <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link href="https://fonts.googleapis.com/css?family=Bitter:400,700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <main class="container">
        <!-- <audio autoplay="true" src="audio/christmas.mp3"> -->
            
        </audio>
        <div id="layer-4">
            <div class="sky"></div>
                <div class="clouds-background">
                    <img src="img/layer-4/cloud.svg" class="cloud">
                    <img src="img/layer-4/cloud.svg" class="cloud cloud-2">
                    <img src="img/layer-4/cloud.svg" class="cloud cloud-3">
                    <div class="trees-background"></div>
                </div>
            <div class="snowflakes">
                <div class="snowflake">
                    ❅
                </div>
                <div class="snowflake">
                    ❅
                </div>
                <div class="snowflake">
                    ❆
                </div>
                <div class="snowflake">
                    ❆
                </div>
                <div class="snowflake">
                    ❅
                </div>
                <div class="snowflake">
                    ❆
                </div>
                <div class="snowflake">
                    ❆
                </div>
                <div class="snowflake">
                    ❅
                </div>
                <div class="snowflake">
                    ❆
                </div>
                <div class="snowflake">
                    ❆
                </div>
            </div>
        </div>
        <div id="layer-3">
            <img src="img/layer-3/Schokobaum.svg" id="schokobaum" onclick="addScore()">
            <audio id="audio" src="audio/soundeffect.mp3"></audio>
        </div>
        <div id="layer-2">
            <div id="romanshorn">
                <img class="tree" src="img/layer-2/tree.svg" alt="">
                <img class="tree" src="img/layer-2/fir-tree.svg" alt="">
                <img class="sbw-house" src="img/layer-2/house-sbw.svg" alt="">
                <img class="tree" src="img/layer-2/fir-tree.svg" alt="">
                <img class="tree" src="img/layer-2/tree.svg" alt="">
                <img class="tree" src=" img/layer-2/fir-tree.svg" alt="">
                <img class="tree" src="img/layer-2/tree.svg" alt="">
            </div>
            <div id="sign1" class="sign">
                <p class="text-sign">Oh Nei Harry! D’LG18er händ dich höch gnoh und dini Schoki-bäum versteckt</p>
                <button class="button-1" onclick="step(1)">weiter</button>
            </div>
            <div id="sign2" class="sign">
                <p class="text-sign">Find dini Schoki-bäum!</p>
                <img src="img/layer-2/help.png" alt="">
                <button onclick="step(2);">start</button>
            </div>
        </div>
        <div id="layer-1">
<div id="ground"></div>
<div id="harry-full">
    <div class="box">
        <!-- add class walk for animated walking, else class "stand" -->
        <div id="body1" class="body stand">
            <div class="head"></div>
            <div class="left arm">
                <div class="upper">
                    <div class="lower">
                    </div>
                </div>
            </div>
            <div class="right arm">
                <div class="upper">
                    <div class="lower">
                    </div>
                </div>
            </div>
            <div class="left leg">
                <div class="upper">
                    <div class="lower">
                    </div>
                </div>
            </div>
            <div class="right leg">
                <div class="upper">
                    <div class="lower">
                    </div>
                </div>
            </div>
            <img id="harry-face" src="img/layer-1/harry1.svg" alt="">
        </div>
    </div>
</div>
            <div id="overlay" class="overlay"></div>
            <div id="highscore" class="sign">
                <p id="game-score">
                    <!-- text added with javascript -->
                </p>
                <button onclick="restartGame()">Nomol versueche</button>
                <button style="display:none" onclick="fastGame()">starte de Ultramodus</button>
            </div>
            <div id="rosina"></div>
            <div id="speech-bubble"></div>
        </div>
    </main>
    <footer>
        <div class="top-footer">
            <div id="score" class="wood">
            </div>
            <div id="TimerBox" class="wood">
                <p id="gameTimer"> Sekunden</p>
            </div>
        </div>
        <div id="countdown">
            <div class="countdown-bg"></div>
            <h2 id="c3">3</h2>
            <h2 id="c2">2</h2>
            <h2 id="c1">1</h2>
        </div>
        <div class="bottom-footer">
            <div class="credits">
                <span>Made by Alisa Abazi, Vanessa Santos & Jasmin Fässler</span>
            </div>
        </div>
    </footer>
    <script>
        var score = 0;
        var newPosition = 1;
        //normal mode
        window.appearTime = 1500;
        window.times = 10;
        scoreDisplay();
        window.stepTwo = 1;
        window.stepOne = 1;
        var audio = document.getElementById("audio");
    // score on top left of screen
        function scoreDisplay() {
            var scoreHtmlCode = "<div class='points'><p>" + window.score + "</p></div>";
            document.getElementById("score").innerHTML = scoreHtmlCode;
        }
        function addScore() {
            if (newPosition == 1) {
                window.score++;
                pointAnim();
                audio.play();
                scoreDisplay();
                newPosition = 0;

                function pointAnim() {
                    document.getElementById("schokobaum").style.animationName = "point-add";
                }
            }
            else {
                // second click on same "schokobaum"
            };
        };


        function step(signNumber){
            if (signNumber == 1) {

                // so that multiple clicks on the button doesn't matter
                if (window.stepOne != 2) {
                    // animate harry, swap face
                    document.getElementById("highscore").style.display = "none";
                    document.getElementById("body1").classList.toggle("walk");
                    document.getElementById("harry-face").src = "img/layer-1/harry2.svg";
                    // sign animation
                    document.getElementById("sign1").style.animationName = "disappear";
                    document.getElementById("sign2").style.display = "inline";
                    document.getElementById("sign2").style.animationName = "appear";
                    window.stepOne = 2;
                    setTimeout(function () {
                        // stop walking
                        document.getElementById("body1").classList.toggle("walk");
                    }, 2000); // How long do you want the delay to be (in milliseconds)? 
                }   
            }

            else if (signNumber == 2) {

                // so that multiple clicks on the button doesn't matter
                if (window.stepTwo != 2) {
                    document.getElementById("sign2").style.animationName = "disappear";
                    document.getElementById("sign1").style.display = "none";
                    document.getElementById("countdown").style.display = "flex";
                    setTimeout(function () {
                        // after 3 seconds start the game
                        document.getElementById("countdown").style.display = "none";
                        console.log("start game");
                        gameStart();
                        }, 3000);
                    console.log("step(2) clicked");     
                    window.stepTwo = 2;
                }               
            }
        }

            function gameStart() {
                window.score = 0;
                scoreDisplay();
                console.log("the game started");
                document.getElementById("sign2").style.display = "none";
                document.getElementById("body1").classList.toggle("walk");
                // animation of obstacles
                document.getElementById("romanshorn").classList.toggle("moving");
                // make "schokobaum" appear
                document.getElementById('schokobaum').style.display = "inline";
                // the "timer"
                let i = 0;
                while (i < times ) {
                    task(i);
                    i++;
                }
                // function for timer, changes position
                function task(i) {
                    setTimeout(function () {
                        var gameTimer = 9 - i;
                        document.getElementById("gameTimer").innerHTML = gameTimer + " Sekunden";
                        gameTimer = 0;
                        document.getElementById("schokobaum").style.animationName = "none";
                        newPosition = 1;
                        // random position for "schokobaum"
                        posY = Math.floor(Math.random() * 50);
                        posX = Math.floor(Math.random() * 95);
                        poY = 100 - posY;
                        document.getElementById('schokobaum').style.top = posY + "vh";
                        document.getElementById('schokobaum').style.left = posX + "vw";
                    }, appearTime * i);
                };

                setTimeout(function () {
                    // after 10 "schokobäum" have appeared finish game
                    finishGame();
                    console.log("game over");
                }, 15000);
            }



            function finishGame() { 
                if (window.score + 2 >= window.times) {
                    console.log("10 Punkte");
                    document.getElementById('rosina').style.display = "inline";
                    document.getElementById('speech-bubble').style.display = "flex";
                };
                document.getElementById("romanshorn").classList.toggle("moving");
                document.getElementById('schokobaum').style.display = "none";
                document.getElementById("body1").classList.toggle("walk");
                document.getElementById("harry-face").src = "img/layer-1/harry1.svg";
                //overlay//
                document.getElementById('overlay').style.display = "inline";

                document.getElementById("highscore").style.display = "flex";

                var gameScore = "<p>Wow du hesch " + score + " vu " + window.times + " Schoki-bäum igsammlet!";
                document.getElementById("game-score").innerHTML = gameScore;
            }

            function fastGame() {
                document.getElementById('schokobaum').style.zIndex = "0";
                document.getElementById('speech-bubble').style.display = "none";
                document.getElementById('rosina').style.display = "none";
                document.getElementById('highscore').style.display = "none";
                // 750 ms * 20 times is ultra mode
                window.appearTime = 2000;
                window.times = 10;
                gameStart();
                document.getElementById("harry-face").src = "img/layer-1/harry2.svg";
                // overlay
                document.getElementById('overlay').style.display = "none";
            }

            function restartGame() {
                document.getElementById('speech-bubble').style.display = "none";
                document.getElementById('rosina').style.display = "none";
                document.getElementById('highscore').style.display = "none";
                document.getElementById('overlay').style.display = "none";
                // normal mode
                window.appearTime = 1500;
                window.times = 10;
                gameStart();
                document.getElementById("harry-face").src = "img/layer-1/harry2.svg";
            }
    </script>
</body>

</html>
